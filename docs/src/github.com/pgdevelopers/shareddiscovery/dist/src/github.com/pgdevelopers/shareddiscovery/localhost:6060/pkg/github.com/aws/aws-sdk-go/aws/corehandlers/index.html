<!DOCTYPE html><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="theme-color" content="#375EAB"/>

  <title>corehandlers - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../lib/godoc/style.css"/>

<script>window.initFuncs = [];</script>
<script src="../../../../../../lib/godoc/jquery.js" defer=""></script>



<script>var goVersion = "go1.17";</script>
<script src="../../../../../../lib/godoc/godocs.js" defer=""></script>
</head>
<body>

<div id="lowframe" style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">▽</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required=""/><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package corehandlers
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import &#34;github.com/aws/aws-sdk-go/aws/corehandlers&#34;</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
				<dd><a href="index.html#pkg-variables">Variables</a></dd>
			
			
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/corehandlers/handlers.go">handlers.go</a>
			
				<a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/corehandlers/param_validator.go">param_validator.go</a>
			
				<a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/corehandlers/user_agent.go">user_agent.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
			<h2 id="pkg-variables">Variables</h2>
			
				<p>
AddHostExecEnvUserAgentHander is a request handler appending the SDK&#39;s
execution environment to the user agent.
</p>
<p>
If the environment variable AWS_EXECUTION_ENV is set, its value will be
appended to the user agent string.
</p>

				<pre>var <span id="AddHostExecEnvUserAgentHander">AddHostExecEnvUserAgentHander</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{
    <a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.AddHostExecEnvUserAgentHander&#34;,
    <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {
        v := <a href="../../../../../os/index.html">os</a>.<a href="../../../../../os/index.html#Getenv">Getenv</a>(execEnvVar)
        if <a href="../../../../../builtin/index.html#len">len</a>(v) == 0 {
            return
        }

        <a href="../request/index.html">request</a>.<a href="../request/index.html#AddToUserAgent">AddToUserAgent</a>(r, execEnvUAKey+&#34;/&#34;+v)
    },
}</pre>
			
				<p>
AfterRetryHandler performs final checks to determine if the request should
be retried and how long to delay.
</p>

				<pre>var <span id="AfterRetryHandler">AfterRetryHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{
    <a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.AfterRetryHandler&#34;,
    <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {

        if r.<a href="index.html#Retryable">Retryable</a> == <a href="../../../../../builtin/index.html#nil">nil</a> || <a href="../index.html">aws</a>.<a href="../index.html#BoolValue">BoolValue</a>(r.<a href="index.html#Config">Config</a>.<a href="index.html#EnforceShouldRetryCheck">EnforceShouldRetryCheck</a>) {
            r.<a href="index.html#Retryable">Retryable</a> = <a href="../index.html">aws</a>.<a href="../index.html#Bool">Bool</a>(r.<a href="index.html#ShouldRetry">ShouldRetry</a>(r))
        }

        if r.<a href="index.html#WillRetry">WillRetry</a>() {
            r.<a href="index.html#RetryDelay">RetryDelay</a> = r.<a href="index.html#RetryRules">RetryRules</a>(r)

            if sleepFn := r.<a href="index.html#Config">Config</a>.<a href="index.html#SleepDelay">SleepDelay</a>; sleepFn != <a href="../../../../../builtin/index.html#nil">nil</a> {

                sleepFn(r.<a href="index.html#RetryDelay">RetryDelay</a>)
            } else if err := <a href="../index.html">aws</a>.<a href="../index.html#SleepWithContext">SleepWithContext</a>(r.<a href="index.html#Context">Context</a>(), r.<a href="index.html#RetryDelay">RetryDelay</a>); err != <a href="../../../../../builtin/index.html#nil">nil</a> {
                r.<a href="index.html#Error">Error</a> = <a href="../awserr/index.html">awserr</a>.<a href="../awserr/index.html#New">New</a>(<a href="../request/index.html">request</a>.<a href="../request/index.html#CanceledErrorCode">CanceledErrorCode</a>,
                    &#34;request context canceled&#34;, err)
                r.<a href="index.html#Retryable">Retryable</a> = <a href="../index.html">aws</a>.<a href="../index.html#Bool">Bool</a>(<a href="../../../../../builtin/index.html#false">false</a>)
                return
            }

            if r.<a href="index.html#IsErrorExpired">IsErrorExpired</a>() {
                r.<a href="index.html#Config">Config</a>.<a href="index.html#Credentials">Credentials</a>.<a href="index.html#Expire">Expire</a>()
            }

            r.<a href="index.html#RetryCount">RetryCount</a>++
            r.<a href="index.html#Error">Error</a> = <a href="../../../../../builtin/index.html#nil">nil</a>
        }
    }}</pre>
			
				<p>
BuildContentLengthHandler builds the content length of a request based on the body,
or will use the HTTPRequest.Header&#39;s &#34;Content-Length&#34; if defined. If unable
to determine request body length and no &#34;Content-Length&#34; was specified it will panic.
</p>
<p>
The Content-Length will only be added to the request if the length of the body
is greater than 0. If the body is empty or the current `Content-Length`
header is &lt;= 0, the header will also be stripped.
</p>

				<pre>var <span id="BuildContentLengthHandler">BuildContentLengthHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{<a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.BuildContentLengthHandler&#34;, <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {
    var <span id="length">length</span> <a href="../../../../../builtin/index.html#int64">int64</a>

    if slength := r.<a href="index.html#HTTPRequest">HTTPRequest</a>.<a href="index.html#Header">Header</a>.<a href="index.html#Get">Get</a>(&#34;Content-Length&#34;); slength != &#34;&#34; {
        length, _ = <a href="../../../../../strconv/index.html">strconv</a>.<a href="../../../../../strconv/index.html#ParseInt">ParseInt</a>(slength, 10, 64)
    } else {
        if r.<a href="index.html#Body">Body</a> != <a href="../../../../../builtin/index.html#nil">nil</a> {
            var <span id="err">err</span> <a href="../../../../../builtin/index.html#error">error</a>
            length, err = <a href="../index.html">aws</a>.<a href="../index.html#SeekerLen">SeekerLen</a>(r.<a href="index.html#Body">Body</a>)
            if err != <a href="../../../../../builtin/index.html#nil">nil</a> {
                r.<a href="index.html#Error">Error</a> = <a href="../awserr/index.html">awserr</a>.<a href="../awserr/index.html#New">New</a>(<a href="../request/index.html">request</a>.<a href="../request/index.html#ErrCodeSerialization">ErrCodeSerialization</a>, &#34;failed to get request body&#39;s length&#34;, err)
                return
            }
        }
    }

    if length &gt; 0 {
        r.<a href="index.html#HTTPRequest">HTTPRequest</a>.<a href="index.html#ContentLength">ContentLength</a> = length
        r.<a href="index.html#HTTPRequest">HTTPRequest</a>.<a href="index.html#Header">Header</a>.<a href="index.html#Set">Set</a>(&#34;Content-Length&#34;, <a href="../../../../../fmt/index.html">fmt</a>.<a href="../../../../../fmt/index.html#Sprintf">Sprintf</a>(&#34;%d&#34;, length))
    } else {
        r.<a href="index.html#HTTPRequest">HTTPRequest</a>.<a href="index.html#ContentLength">ContentLength</a> = 0
        r.<a href="index.html#HTTPRequest">HTTPRequest</a>.<a href="index.html#Header">Header</a>.<a href="index.html#Del">Del</a>(&#34;Content-Length&#34;)
    }
}}</pre>
			
				<p>
SDKVersionUserAgentHandler is a request handler for adding the SDK Version
to the user agent.
</p>

				<pre>var <span id="SDKVersionUserAgentHandler">SDKVersionUserAgentHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{
    <a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.SDKVersionUserAgentHandler&#34;,
    <a href="../request/index.html#NamedHandler.Fn">Fn</a>: <a href="../request/index.html">request</a>.<a href="../request/index.html#MakeAddToUserAgentHandler">MakeAddToUserAgentHandler</a>(<a href="../index.html">aws</a>.<a href="../index.html#SDKName">SDKName</a>, <a href="../index.html">aws</a>.<a href="../index.html#SDKVersion">SDKVersion</a>,
        <a href="../../../../../runtime/index.html">runtime</a>.<a href="../../../../../runtime/index.html#Version">Version</a>(), <a href="../../../../../runtime/index.html">runtime</a>.<a href="../../../../../runtime/index.html#GOOS">GOOS</a>, <a href="../../../../../runtime/index.html">runtime</a>.<a href="../../../../../runtime/index.html#GOARCH">GOARCH</a>),
}</pre>
			
				<p>
SendHandler is a request handler to send service request using HTTP client.
</p>

				<pre>var <span id="SendHandler">SendHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{
    <a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.SendHandler&#34;,
    <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {
        sender := sendFollowRedirects
        if r.<a href="index.html#DisableFollowRedirects">DisableFollowRedirects</a> {
            sender = sendWithoutFollowRedirects
        }

        if <a href="../request/index.html">request</a>.<a href="../request/index.html#NoBody">NoBody</a> == r.<a href="index.html#HTTPRequest">HTTPRequest</a>.<a href="index.html#Body">Body</a> {

            reqOrig, reqCopy := r.<a href="index.html#HTTPRequest">HTTPRequest</a>, *r.<a href="index.html#HTTPRequest">HTTPRequest</a>
            reqCopy.<a href="index.html#Body">Body</a> = <a href="../../../../../builtin/index.html#nil">nil</a>
            r.<a href="index.html#HTTPRequest">HTTPRequest</a> = &amp;reqCopy
            defer func() {
                r.<a href="index.html#HTTPRequest">HTTPRequest</a> = reqOrig
            }()
        }

        var <span id="err">err</span> <a href="../../../../../builtin/index.html#error">error</a>
        r.<a href="index.html#HTTPResponse">HTTPResponse</a>, err = sender(r)
        if err != <a href="../../../../../builtin/index.html#nil">nil</a> {
            handleSendError(r, err)
        }
    },
}</pre>
			
				<p>
ValidateEndpointHandler is a request handler to validate a request had the
appropriate Region and Endpoint set. Will set r.Error if the endpoint or
region is not valid.
</p>

				<pre>var <span id="ValidateEndpointHandler">ValidateEndpointHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{<a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.ValidateEndpointHandler&#34;, <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {
    if r.<a href="index.html#ClientInfo">ClientInfo</a>.<a href="index.html#SigningRegion">SigningRegion</a> == &#34;&#34; &amp;&amp; <a href="../index.html">aws</a>.<a href="../index.html#StringValue">StringValue</a>(r.<a href="index.html#Config">Config</a>.<a href="index.html#Region">Region</a>) == &#34;&#34; {
        r.<a href="index.html#Error">Error</a> = <a href="../index.html">aws</a>.<a href="../index.html#ErrMissingRegion">ErrMissingRegion</a>
    } else if r.<a href="index.html#ClientInfo">ClientInfo</a>.<a href="index.html#Endpoint">Endpoint</a> == &#34;&#34; {

        r.<a href="index.html#Error">Error</a> = <a href="../index.html">aws</a>.<a href="../index.html#ErrMissingEndpoint">ErrMissingEndpoint</a>
    }
}}</pre>
			
				<p>
ValidateParametersHandler is a request handler to validate the input parameters.
Validating parameters only has meaning if done prior to the request being sent.
</p>

				<pre>var <span id="ValidateParametersHandler">ValidateParametersHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{<a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.ValidateParametersHandler&#34;, <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {
    if !r.<a href="index.html#ParamsFilled">ParamsFilled</a>() {
        return
    }

    if v, ok := r.<a href="index.html#Params">Params</a>.(<a href="../request/index.html">request</a>.<a href="../request/index.html#Validator">Validator</a>); ok {
        if err := v.<a href="index.html#Validate">Validate</a>(); err != <a href="../../../../../builtin/index.html#nil">nil</a> {
            r.<a href="index.html#Error">Error</a> = err
        }
    }
}}</pre>
			
				<p>
ValidateReqSigHandler is a request handler to ensure that the request&#39;s
signature doesn&#39;t expire before it is sent. This can happen when a request
is built and signed significantly before it is sent. Or significant delays
occur when retrying requests that would cause the signature to expire.
</p>

				<pre>var <span id="ValidateReqSigHandler">ValidateReqSigHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{
    <a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.ValidateReqSigHandler&#34;,
    <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {

        if r.<a href="index.html#Config">Config</a>.<a href="index.html#Credentials">Credentials</a> == <a href="../credentials/index.html">credentials</a>.<a href="../credentials/index.html#AnonymousCredentials">AnonymousCredentials</a> {
            return
        }

        signedTime := r.<a href="index.html#Time">Time</a>
        if !r.<a href="index.html#LastSignedAt">LastSignedAt</a>.<a href="index.html#IsZero">IsZero</a>() {
            signedTime = r.<a href="index.html#LastSignedAt">LastSignedAt</a>
        }

        if signedTime.<a href="index.html#Add">Add</a>(5 * <a href="../../../../../time/index.html">time</a>.<a href="../../../../../time/index.html#Minute">Minute</a>).<a href="index.html#After">After</a>(<a href="../../../../../time/index.html">time</a>.<a href="../../../../../time/index.html#Now">Now</a>()) {
            return
        }

        <a href="../../../../../fmt/index.html">fmt</a>.<a href="../../../../../fmt/index.html#Println">Println</a>(&#34;request expired, resigning&#34;)
        r.<a href="index.html#Sign">Sign</a>()
    },
}</pre>
			
				<p>
ValidateResponseHandler is a request handler to validate service response.
</p>

				<pre>var <span id="ValidateResponseHandler">ValidateResponseHandler</span> = <a href="../request/index.html">request</a>.<a href="../request/index.html#NamedHandler">NamedHandler</a>{<a href="../request/index.html#NamedHandler.Name">Name</a>: &#34;core.ValidateResponseHandler&#34;, <a href="../request/index.html#NamedHandler.Fn">Fn</a>: func(r *<a href="../request/index.html">request</a>.<a href="../request/index.html#Request">Request</a>) {
    if r.<a href="index.html#HTTPResponse">HTTPResponse</a>.<a href="index.html#StatusCode">StatusCode</a> == 0 || r.<a href="index.html#HTTPResponse">HTTPResponse</a>.<a href="index.html#StatusCode">StatusCode</a> &gt;= 300 {

        r.<a href="index.html#Error">Error</a> = <a href="../awserr/index.html">awserr</a>.<a href="../awserr/index.html#New">New</a>(&#34;UnknownError&#34;, &#34;unknown error&#34;, r.<a href="index.html#Error">Error</a>)
    }
}}</pre>
			
		
		
		
	

	







<div id="footer">
Build version go1.17.<br/>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br/>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->


</body></html>
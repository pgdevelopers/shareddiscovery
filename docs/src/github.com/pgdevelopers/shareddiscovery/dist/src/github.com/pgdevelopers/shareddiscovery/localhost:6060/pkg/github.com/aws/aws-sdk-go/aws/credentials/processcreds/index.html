<!DOCTYPE html><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="theme-color" content="#375EAB"/>

  <title>processcreds - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../../lib/godoc/style.css"/>

<script>window.initFuncs = [];</script>
<script src="../../../../../../../lib/godoc/jquery.js" defer=""></script>



<script>var goVersion = "go1.17";</script>
<script src="../../../../../../../lib/godoc/godocs.js" defer=""></script>
</head>
<body>

<div id="lowframe" style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">▽</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required=""/><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package processcreds
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import &#34;github.com/aws/aws-sdk-go/aws/credentials/processcreds&#34;</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
Package processcreds is a credential Provider to retrieve `credential_process`
credentials.
</p>
<p>
WARNING: The following describes a method of sourcing credentials from an external
process. This can potentially be dangerous, so proceed with caution. Other
credential providers should be preferred if at all possible. If using this
option, you should make sure that the config file is as locked down as possible
using security best practices for your operating system.
</p>
<p>
You can use credentials from a `credential_process` in a variety of ways.
</p>
<p>
One way is to setup your shared config file, located in the default
location, with the `credential_process` key and the command you want to be
called. You also need to set the AWS_SDK_LOAD_CONFIG environment variable
(e.g., `export AWS_SDK_LOAD_CONFIG=1`) to use the shared config file.
</p>
<pre>[default]
credential_process = /command/to/call
</pre>
<p>
Creating a new session will use the credential process to retrieve credentials.
NOTE: If there are credentials in the profile you are using, the credential
process will not be used.
</p>
<pre>// Initialize a session to load credentials.
sess, _ := session.NewSession(&amp;aws.Config{
    Region: aws.String(&#34;us-east-1&#34;)},
)

// Create S3 service client to use the credentials.
svc := s3.New(sess)
</pre>
<p>
Another way to use the `credential_process` method is by using
`credentials.NewCredentials()` and providing a command to be executed to
retrieve credentials:
</p>
<pre>// Create credentials using the ProcessProvider.
creds := processcreds.NewCredentials(&#34;/path/to/command&#34;)

// Create service client value configured for credentials.
svc := s3.New(sess, &amp;aws.Config{Credentials: creds})
</pre>
<p>
You can set a non-default timeout for the `credential_process` with another
constructor, `credentials.NewCredentialsTimeout()`, providing the timeout. To
set a one minute timeout:
</p>
<pre>// Create credentials using the ProcessProvider.
creds := processcreds.NewCredentialsTimeout(
    &#34;/path/to/command&#34;,
    time.Duration(500) * time.Millisecond)
</pre>
<p>
If you need more control, you can set any configurable options in the
credentials using one or more option functions. For example, you can set a two
minute timeout, a credential duration of 60 minutes, and a maximum stdout
buffer size of 2k.
</p>
<pre>creds := processcreds.NewCredentials(
    &#34;/path/to/command&#34;,
    func(opt *ProcessProvider) {
        opt.Timeout = time.Duration(2) * time.Minute
        opt.Duration = time.Duration(60) * time.Minute
        opt.MaxBufSize = 2048
    })
</pre>
<p>
You can also use your own `exec.Cmd`:
</p>
<pre>// Create an exec.Cmd
myCommand := exec.Command(&#34;/path/to/command&#34;)

// Create credentials using your exec.Cmd and custom timeout
creds := processcreds.NewCredentialsCommand(
	myCommand,
	func(opt *processcreds.ProcessProvider) {
		opt.Timeout = time.Duration(1) * time.Second
	})
</pre>

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
				<dd><a href="index.html#pkg-constants">Constants</a></dd>
			
			
			
				
				<dd><a href="index.html#NewCredentials">func NewCredentials(command string, options ...func(*ProcessProvider)) *credentials.Credentials</a></dd>
			
				
				<dd><a href="index.html#NewCredentialsCommand">func NewCredentialsCommand(command *exec.Cmd, options ...func(*ProcessProvider)) *credentials.Credentials</a></dd>
			
				
				<dd><a href="index.html#NewCredentialsTimeout">func NewCredentialsTimeout(command string, timeout time.Duration) *credentials.Credentials</a></dd>
			
			
				
				<dd><a href="index.html#ProcessProvider">type ProcessProvider</a></dd>
				
				
					
					<dd>    <a href="index.html#ProcessProvider.IsExpired">func (p *ProcessProvider) IsExpired() bool</a></dd>
				
					
					<dd>    <a href="index.html#ProcessProvider.Retrieve">func (p *ProcessProvider) Retrieve() (credentials.Value, error)</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/processcreds/provider.go">provider.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
			<h2 id="pkg-constants">Constants</h2>
			
				
				<pre>const (
    <span class="comment">// ProviderName is the name this credentials provider will label any</span>
    <span class="comment">// returned credentials Value with.</span>
    <span id="ProviderName">ProviderName</span> = `ProcessProvider`

    <span class="comment">// ErrCodeProcessProviderParse error parsing process output</span>
    <span id="ErrCodeProcessProviderParse">ErrCodeProcessProviderParse</span> = &#34;ProcessProviderParseError&#34;

    <span class="comment">// ErrCodeProcessProviderVersion version error in output</span>
    <span id="ErrCodeProcessProviderVersion">ErrCodeProcessProviderVersion</span> = &#34;ProcessProviderVersionError&#34;

    <span class="comment">// ErrCodeProcessProviderRequired required attribute missing in output</span>
    <span id="ErrCodeProcessProviderRequired">ErrCodeProcessProviderRequired</span> = &#34;ProcessProviderRequiredError&#34;

    <span class="comment">// ErrCodeProcessProviderExecution execution of command failed</span>
    <span id="ErrCodeProcessProviderExecution">ErrCodeProcessProviderExecution</span> = &#34;ProcessProviderExecutionError&#34;

    <span class="comment">// DefaultDuration is the default amount of time in minutes that the</span>
    <span class="comment">// credentials will be valid for.</span>
    <span id="DefaultDuration">DefaultDuration</span> = <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Duration">Duration</a>(15) * <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Minute">Minute</a>

    <span class="comment">// DefaultBufSize limits buffer size from growing to an enormous</span>
    <span class="comment">// amount due to a faulty process.</span>
    <span id="DefaultBufSize">DefaultBufSize</span> = <a href="../../../../../../builtin/index.html#int">int</a>(8 * <a href="../../../internal/sdkio/index.html">sdkio</a>.<a href="../../../internal/sdkio/index.html#KibiByte">KibiByte</a>)

    <span class="comment">// DefaultTimeout default limit on time a process can run.</span>
    <span id="DefaultTimeout">DefaultTimeout</span> = <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Duration">Duration</a>(1) * <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Minute">Minute</a>
)</pre>
			
		
		
		
			
			
			<h2 id="NewCredentials">func <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/processcreds/provider.go?s=6662:6757#L177">NewCredentials</a>
				<a class="permalink" href="index.html#NewCredentials">¶</a>
				
				
			</h2>
			<pre>func NewCredentials(command <a href="../../../../../../builtin/index.html#string">string</a>, options ...func(*<a href="index.html#ProcessProvider">ProcessProvider</a>)) *<a href="../index.html">credentials</a>.<a href="../index.html#Credentials">Credentials</a></pre>
			<p>
NewCredentials returns a pointer to a new Credentials object wrapping the
ProcessProvider. The credentials will expire every 15 minutes by default.
</p>

			
			

		
			
			
			<h2 id="NewCredentialsCommand">func <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/processcreds/provider.go?s=7510:7615#L204">NewCredentialsCommand</a>
				<a class="permalink" href="index.html#NewCredentialsCommand">¶</a>
				
				
			</h2>
			<pre>func NewCredentialsCommand(command *<a href="../../../../../../os/exec/index.html">exec</a>.<a href="../../../../../../os/exec/index.html#Cmd">Cmd</a>, options ...func(*<a href="index.html#ProcessProvider">ProcessProvider</a>)) *<a href="../index.html">credentials</a>.<a href="../index.html#Credentials">Credentials</a></pre>
			<p>
NewCredentialsCommand returns a pointer to a new Credentials object with
the specified command, and default timeout, duration and max buffer size.
</p>

			
			

		
			
			
			<h2 id="NewCredentialsTimeout">func <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/processcreds/provider.go?s=7163:7253#L194">NewCredentialsTimeout</a>
				<a class="permalink" href="index.html#NewCredentialsTimeout">¶</a>
				
				
			</h2>
			<pre>func NewCredentialsTimeout(command <a href="../../../../../../builtin/index.html#string">string</a>, timeout <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Duration">Duration</a>) *<a href="../index.html">credentials</a>.<a href="../index.html#Credentials">Credentials</a></pre>
			<p>
NewCredentialsTimeout returns a pointer to a new Credentials object with
the specified command and timeout, and default duration and max buffer size.
</p>

			
			

		
		
			
			
			<h2 id="ProcessProvider">type <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/processcreds/provider.go?s=5509:6506#L144">ProcessProvider</a>
				<a class="permalink" href="index.html#ProcessProvider">¶</a>
				
				
			</h2>
			<p>
ProcessProvider satisfies the credentials.Provider interface, and is a
client to retrieve credentials from a process.
</p>

			<pre>type ProcessProvider struct {
    <a href="../index.html">credentials</a>.<a href="../index.html#Expiry">Expiry</a>

    <span class="comment">// Expiry duration of the credentials. Defaults to 15 minutes if not set.</span>
<span id="ProcessProvider.Duration"></span>    Duration <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Duration">Duration</a>

<span id="ProcessProvider.ExpiryWindow"></span>    <span class="comment">// ExpiryWindow will allow the credentials to trigger refreshing prior to</span>
    <span class="comment">// the credentials actually expiring. This is beneficial so race conditions</span>
    <span class="comment">// with expiring credentials do not cause request to fail unexpectedly</span>
    <span class="comment">// due to ExpiredTokenException exceptions.</span>
    <span class="comment">//</span>
    <span class="comment">// So a ExpiryWindow of 10s would cause calls to IsExpired() to return true</span>
    <span class="comment">// 10 seconds before the credentials are actually expired.</span>
    <span class="comment">//</span>
    <span class="comment">// If ExpiryWindow is 0 or less it will be ignored.</span>
    ExpiryWindow <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Duration">Duration</a>

<span id="ProcessProvider.MaxBufSize"></span>    <span class="comment">// MaxBufSize limits memory usage from growing to an enormous</span>
    <span class="comment">// amount due to a faulty process.</span>
    MaxBufSize <a href="../../../../../../builtin/index.html#int">int</a>

<span id="ProcessProvider.Timeout"></span>    <span class="comment">// Timeout limits the time a process can run.</span>
    Timeout <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Duration">Duration</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="ProcessProvider.IsExpired">func (*ProcessProvider) <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/processcreds/provider.go?s=9570:9612#L280">IsExpired</a>
					<a class="permalink" href="index.html#ProcessProvider.IsExpired">¶</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#ProcessProvider">ProcessProvider</a>) IsExpired() <a href="../../../../../../builtin/index.html#bool">bool</a></pre>
				<p>
IsExpired returns true if the credentials retrieved are expired, or not yet
retrieved.
</p>

				
				
				
			
				
				<h3 id="ProcessProvider.Retrieve">func (*ProcessProvider) <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/processcreds/provider.go?s=8111:8174#L228">Retrieve</a>
					<a class="permalink" href="index.html#ProcessProvider.Retrieve">¶</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#ProcessProvider">ProcessProvider</a>) Retrieve() (<a href="../index.html">credentials</a>.<a href="../index.html#Value">Value</a>, <a href="../../../../../../builtin/index.html#error">error</a>)</pre>
				<p>
Retrieve executes the &#39;credential_process&#39; and returns the credentials.
</p>

				
				
				
			
		
	

	







<div id="footer">
Build version go1.17.<br/>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br/>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->


</body></html>
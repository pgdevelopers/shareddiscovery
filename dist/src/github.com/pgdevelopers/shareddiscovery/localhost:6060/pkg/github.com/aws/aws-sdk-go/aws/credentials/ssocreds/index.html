<!DOCTYPE html><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="theme-color" content="#375EAB"/>

  <title>ssocreds - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../../lib/godoc/style.css"/>

<script>window.initFuncs = [];</script>
<script src="../../../../../../../lib/godoc/jquery.js" defer=""></script>



<script>var goVersion = "go1.17";</script>
<script src="../../../../../../../lib/godoc/godocs.js" defer=""></script>
</head>
<body>

<div id="lowframe" style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">▽</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required=""/><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package ssocreds
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import &#34;github.com/aws/aws-sdk-go/aws/credentials/ssocreds&#34;</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
Package ssocreds provides a credential provider for retrieving temporary AWS credentials using an SSO access token.
</p>
<p>
IMPORTANT: The provider in this package does not initiate or perform the AWS SSO login flow. The SDK provider
expects that you have already performed the SSO login flow using AWS CLI using the &#34;aws sso login&#34; command, or by
some other mechanism. The provider must find a valid non-expired access token for the AWS SSO user portal URL in
~/.aws/sso/cache. If a cached token is not found, it is expired, or the file is malformed an error will be returned.
</p>
<h3 id="hdr-Loading_AWS_SSO_credentials_with_the_AWS_shared_configuration_file">Loading AWS SSO credentials with the AWS shared configuration file</h3>
<p>
You can use configure AWS SSO credentials from the AWS shared configuration file by
providing the specifying the required keys in the profile:
</p>
<pre>sso_account_id
sso_region
sso_role_name
sso_start_url
</pre>
<p>
For example, the following defines a profile &#34;devsso&#34; and specifies the AWS SSO parameters that defines the target
account, role, sign-on portal, and the region where the user portal is located. Note: all SSO arguments must be
provided, or an error will be returned.
</p>
<pre>[profile devsso]
sso_start_url = <a href="https://my-sso-portal.awsapps.com/start">https://my-sso-portal.awsapps.com/start</a>
sso_role_name = SSOReadOnlyRole
sso_region = us-east-1
sso_account_id = 123456789012
</pre>
<p>
Using the config module, you can load the AWS SDK shared configuration, and specify that this profile be used to
retrieve credentials. For example:
</p>
<pre>sess, err := session.NewSessionWithOptions(session.Options{
    SharedConfigState: session.SharedConfigEnable,
    Profile:           &#34;devsso&#34;,
})
if err != nil {
    return err
}
</pre>
<h3 id="hdr-Programmatically_loading_AWS_SSO_credentials_directly">Programmatically loading AWS SSO credentials directly</h3>
<p>
You can programmatically construct the AWS SSO Provider in your application, and provide the necessary information
to load and retrieve temporary credentials using an access token from ~/.aws/sso/cache.
</p>
<pre>svc := sso.New(sess, &amp;aws.Config{
    Region: aws.String(&#34;us-west-2&#34;), // Client Region must correspond to the AWS SSO user portal region
})

provider := ssocreds.NewCredentialsWithClient(svc, &#34;123456789012&#34;, &#34;SSOReadOnlyRole&#34;, &#34;<a href="https://my-sso-portal.awsapps.com/start">https://my-sso-portal.awsapps.com/start</a>&#34;)

credentials, err := provider.Get()
if err != nil {
    return err
}
</pre>
<h3 id="hdr-Additional_Resources">Additional Resources</h3>
<p>
Configuring the AWS CLI to use AWS Single Sign-On: <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html</a>
</p>
<p>
AWS Single Sign-On User Guide: <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html">https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html</a>
</p>

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
				<dd><a href="index.html#pkg-constants">Constants</a></dd>
			
			
			
				
				<dd><a href="index.html#NewCredentials">func NewCredentials(configProvider client.ConfigProvider, accountID, roleName, startURL string, optFns ...func(provider *Provider)) *credentials.Credentials</a></dd>
			
				
				<dd><a href="index.html#NewCredentialsWithClient">func NewCredentialsWithClient(client ssoiface.SSOAPI, accountID, roleName, startURL string, optFns ...func(provider *Provider)) *credentials.Credentials</a></dd>
			
			
				
				<dd><a href="index.html#Provider">type Provider</a></dd>
				
				
					
					<dd>    <a href="index.html#Provider.Retrieve">func (p *Provider) Retrieve() (credentials.Value, error)</a></dd>
				
					
					<dd>    <a href="index.html#Provider.RetrieveWithContext">func (p *Provider) RetrieveWithContext(ctx credentials.Context) (credentials.Value, error)</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/doc.go">doc.go</a>
			
				<a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/os.go">os.go</a>
			
				<a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/provider.go">provider.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
			<h2 id="pkg-constants">Constants</h2>
			
				<p>
ErrCodeSSOProviderInvalidToken is the code type that is returned if loaded token has expired or is otherwise invalid.
To refresh the SSO session run aws sso login with the corresponding profile.
</p>

				<pre>const <span id="ErrCodeSSOProviderInvalidToken">ErrCodeSSOProviderInvalidToken</span> = &#34;SSOProviderInvalidToken&#34;</pre>
			
				<p>
ProviderName is the name of the provider used to specify the source of credentials.
</p>

				<pre>const <span id="ProviderName">ProviderName</span> = &#34;SSOProvider&#34;</pre>
			
		
		
		
			
			
			<h2 id="NewCredentials">func <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/provider.go?s=1832:1988#L52">NewCredentials</a>
				<a class="permalink" href="index.html#NewCredentials">¶</a>
				
				
			</h2>
			<pre>func NewCredentials(configProvider <a href="../../client/index.html">client</a>.<a href="../../client/index.html#ConfigProvider">ConfigProvider</a>, accountID, roleName, startURL <a href="../../../../../../builtin/index.html#string">string</a>, optFns ...func(provider *<a href="index.html#Provider">Provider</a>)) *<a href="../index.html">credentials</a>.<a href="../index.html#Credentials">Credentials</a></pre>
			<p>
NewCredentials returns a new AWS Single Sign-On (AWS SSO) credential provider. The ConfigProvider is expected to be configured
for the AWS Region where the AWS SSO user portal is located.
</p>

			
			

		
			
			
			<h2 id="NewCredentialsWithClient">func <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/provider.go?s=2299:2451#L58">NewCredentialsWithClient</a>
				<a class="permalink" href="index.html#NewCredentialsWithClient">¶</a>
				
				
			</h2>
			<pre>func NewCredentialsWithClient(client <a href="../../../service/sso/ssoiface/index.html">ssoiface</a>.<a href="../../../service/sso/ssoiface/index.html#SSOAPI">SSOAPI</a>, accountID, roleName, startURL <a href="../../../../../../builtin/index.html#string">string</a>, optFns ...func(provider *<a href="index.html#Provider">Provider</a>)) *<a href="../index.html">credentials</a>.<a href="../index.html#Credentials">Credentials</a></pre>
			<p>
NewCredentialsWithClient returns a new AWS Single Sign-On (AWS SSO) credential provider. The provided client is expected to be configured
for the AWS Region where the AWS SSO user portal is located.
</p>

			
			

		
		
			
			
			<h2 id="Provider">type <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/provider.go?s=1230:1636#L34">Provider</a>
				<a class="permalink" href="index.html#Provider">¶</a>
				
				
			</h2>
			<p>
Provider is an AWS credential provider that retrieves temporary AWS credentials by exchanging an SSO login token.
</p>

			<pre>type Provider struct {
    <a href="../index.html">credentials</a>.<a href="../index.html#Expiry">Expiry</a>

    <span class="comment">// The Client which is configured for the AWS Region where the AWS SSO user portal is located.</span>
<span id="Provider.Client"></span>    Client <a href="../../../service/sso/ssoiface/index.html">ssoiface</a>.<a href="../../../service/sso/ssoiface/index.html#SSOAPI">SSOAPI</a>

    <span class="comment">// The AWS account that is assigned to the user.</span>
<span id="Provider.AccountID"></span>    AccountID <a href="../../../../../../builtin/index.html#string">string</a>

    <span class="comment">// The role name that is assigned to the user.</span>
<span id="Provider.RoleName"></span>    RoleName <a href="../../../../../../builtin/index.html#string">string</a>

    <span class="comment">// The URL that points to the organization&#39;s AWS Single Sign-On (AWS SSO) user portal.</span>
<span id="Provider.StartURL"></span>    StartURL <a href="../../../../../../builtin/index.html#string">string</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="Provider.Retrieve">func (*Provider) <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/provider.go?s=2822:2878#L75">Retrieve</a>
					<a class="permalink" href="index.html#Provider.Retrieve">¶</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Provider">Provider</a>) Retrieve() (<a href="../index.html">credentials</a>.<a href="../index.html#Value">Value</a>, <a href="../../../../../../builtin/index.html#error">error</a>)</pre>
				<p>
Retrieve retrieves temporary AWS credentials from the configured Amazon Single Sign-On (AWS SSO) user portal
by exchanging the accessToken present in ~/.aws/sso/cache.
</p>

				
				
				
			
				
				<h3 id="Provider.RetrieveWithContext">func (*Provider) <a href="http://localhost:6060/src/github.com/aws/aws-sdk-go/aws/credentials/ssocreds/provider.go?s=3124:3214#L81">RetrieveWithContext</a>
					<a class="permalink" href="index.html#Provider.RetrieveWithContext">¶</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Provider">Provider</a>) RetrieveWithContext(ctx <a href="../index.html">credentials</a>.<a href="../index.html#Context">Context</a>) (<a href="../index.html">credentials</a>.<a href="../index.html#Value">Value</a>, <a href="../../../../../../builtin/index.html#error">error</a>)</pre>
				<p>
RetrieveWithContext retrieves temporary AWS credentials from the configured Amazon Single Sign-On (AWS SSO) user portal
by exchanging the accessToken present in ~/.aws/sso/cache.
</p>

				
				
				
			
		
	

	







<div id="footer">
Build version go1.17.<br/>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br/>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->


</body></html>